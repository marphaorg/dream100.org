{% include firebase.html %}
<script src="/assets/js/vendor/jquery-1.12.4.min.js"></script>
<script>
  loadApplicationStats();
  function loadApplicationStats() {
    var task = dbFileManager.getApplicationStats("form-2078");

    var submittedCount = 0;
    var reviewedCount = 0;
    var verifiedCount = 0;
    var approvedCount = 0;

    task
      .get()
      .then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
          //console.log(doc.data());
          submittedCount += 1;
          if (doc.data().reviewed == true && !doc.data().verified_date) {
            reviewedCount++;
          }
          if (doc.data().verified == true && doc.data().verified_date) {
            verifiedCount++;
          }
          if (doc.data().approved == true && doc.data().approved_date) {
            approvedCount++;
          }
        });
        //console.log(submittedCount);
        $("#lblSubmitted").text(submittedCount);
        $("#lblUnderReview").text(reviewedCount);
        $("#lblVerified").text(verifiedCount);
        $("#lblApproved").text(approvedCount);
      })
      .catch((error) => {
        console.log("Error getting documents: ", error);
      });
  }
</script>
